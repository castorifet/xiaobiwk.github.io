<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElytraSky(TC) xin商店</title>
    <style>
        :root {
            --primary-color: #4CAF50;
            --dark-bg: #121212;
            --card-bg: #1e1e1e;
            --border-color: #333;
            --text-color: #e0e0e0;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-color);
            padding-bottom: 60px;
        }
        
          .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            /* 确保导航栏不会被其他元素遮挡 */
            pointer-events: none; /* 允许点击穿透到链接 */
        }
        
        .nav-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            max-width: 90%;
            /* 重置指针事件 */
            pointer-events: auto;
        }
        
        .nav-links a {
            color: var(--primary-color);
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 20px;
            transition: all 0.3s;
            border: 1px solid var(--primary-color);
            font-size: 0.9em;
            white-space: nowrap;
            /* 确保链接可点击 */
            position: relative;
            z-index: 1001;
        }
        
        .nav-links a:hover {
            background: var(--primary-color);
            color: white;
        }
        
        /* 其他样式保持不变... */
        .container {
            max-width: 1200px;
            margin: 70px auto 20px;
            padding: 0 15px;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8em;
        }
        
        .category {
            margin-bottom: 35px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .category-title {
            font-size: 1.5em;
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--primary-color);
        }
        
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 15px;
        }
        
        .product {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .product:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .product-image-container {
            width: 100%;
            height: 160px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #2a2a2a;
        }
        
        .product-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .product-name {
            font-weight: bold;
            margin-bottom: 6px;
            font-size: 1.05em;
            min-height: 40px;
        }
        
        .product-price {
            color: var(--primary-color);
            font-weight: bold;
            margin: 10px 0;
        }
        
        .add-to-cart {
            background: linear-gradient(45deg, var(--primary-color), #45a049);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            font-size: 0.95em;
            position: relative;
            overflow: hidden;
        }
        
        .add-to-cart:hover {
            transform: scale(1.05);
        }
        
        .add-to-cart:active {
            transform: scale(0.95);
        }
        
        .add-to-cart.clicked {
            background: linear-gradient(45deg, #45a049, #4CAF50);
        }
        
        .add-to-cart.clicked::after {
            content: "✓ 已添加";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #45a049, #4CAF50);
        }
        
        .plus-one {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.2em;
            opacity: 0;
            animation: jumpUp 1s ease-out forwards;
            z-index: 10;
        }
        
        @keyframes jumpUp {
            0% {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(-50px);
                opacity: 0;
            }
        }
        
        .cart-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(30, 30, 30, 0.95);
            border-top: 1px solid var(--border-color);
            z-index: 999;
            transition: all 0.3s;
            max-height: 60px;
            overflow: hidden;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        
        .cart-container.expanded {
            max-height: 500px;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: rgba(0,0,0,0.2);
            cursor: pointer;
        }
        
        .cart-title {
            font-size: 1.1em;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .cart-title span {
            margin-left: 8px;
            background: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.9em;
        }
        
        .cart-toggle {
            color: var(--primary-color);
            font-size: 1.2em;
            transition: transform 0.3s;
        }
        
        .cart-container.expanded .cart-toggle {
            transform: rotate(180deg);
        }
        
        .cart-content {
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: bold;
        }
        
        .cart-item-price {
            color: var(--primary-color);
            font-size: 0.9em;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .quantity-btn {
            background: var(--border-color);
            color: var(--text-color);
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin: 0 5px;
        }
        
        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 3px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .cart-total {
            font-weight: bold;
            text-align: right;
            margin-top: 15px;
            font-size: 1.2em;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }
        
        .cart-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .generate-code {
            background: linear-gradient(45deg, var(--primary-color), #45a049);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            transition: transform 0.3s;
        }
        
        .generate-code:hover {
            transform: scale(1.03);
        }
        
        .clear-cart {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .clear-cart:hover {
            transform: scale(1.03);
        }
        
        .code-output {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            word-break: break-all;
            font-family: monospace;
            font-size: 0.9em;
            display: none;
        }
        
        .username-input {
            margin-top: 15px;
        }
        
        .username-input label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .username-input input {
            width: 100%;
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background: rgba(0,0,0,0.3);
            color: var(--text-color);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1001;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .products {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .product-image-container {
                height: 120px;
            }
            
            .product-name {
                font-size: 0.95em;
                min-height: 36px;
            }
            
            .add-to-cart {
                padding: 6px 12px;
                font-size: 0.9em;
            }
            
            .nav-links {
                gap: 8px;
            }
            
            .nav-links a {
                padding: 4px 8px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="toast" id="toast"></div>
    
    <nav class="navbar">
        <div class="nav-links">
            <a href="#elytrasky-kits">ElytraSky-Kits</a>
            <a href="#other-org-kits">其他组织kit</a>
            <a href="#misc-kits">杂项kit</a>
            <a href="#banner-kits">旗帜类kit</a>
            <a href="#forbidden-kits">违禁品kit</a>
        </div>
    </nav>

    <div class="container">
        <h1>ElytraSky(TC) 商店</h1>
         <section id="elytrasky-kits" class="category">
            <h2 class="category-title">ElytraSky-Kits</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589f90662c.jpg" alt="TC生存盒">
                    </div>
                    <div class="product-name">TC生存盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es1" data-name="TC生存盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589f901276.jpg" alt="TC不死图腾盒">
                    </div>
                    <div class="product-name">TC不死图腾盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es2" data-name="TC不死图腾盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589f93978c.jpg" alt="TC矿物盒">
                    </div>
                    <div class="product-name">TC矿物盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es3" data-name="TC矿物盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589f91c3ff.jpg" alt="TC炸弹盒">
                    </div>
                    <div class="product-name">TC炸弹盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es4" data-name="TC炸弹盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589f914709.jpg" alt="TC鞘翅盒">
                    </div>
                    <div class="product-name">TC鞘翅盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es5" data-name="TC鞘翅盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589c740886.jpg" alt="TC烟花盒">
                    </div>
                    <div class="product-name">TC烟花盒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es6" data-name="TC烟花盒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589c73777f.jpg" alt="ElytraSky(TC) Banners Kit">
                    </div>
                    <div class="product-name">ElytraSky(TC) Banners Kit</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="es7" data-name="ElytraSky(TC) Banners Kit" data-price="0.2">加入购物车</button>
                </div>
            </div>
        </section>
        
        <section id="other-org-kits" class="category">
            <h2 class="category-title">其他组织kit</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c5877a9933f.jpg" alt="魔女の武器装备">
                    </div>
                    <div class="product-name">魔女の武器装备</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org1" data-name="魔女の武器装备" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c5877b4a99d.jpg" alt="魔女の战斗补给">
                    </div>
                    <div class="product-name">魔女の战斗补给</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org2" data-name="魔女の战斗补给" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c5877b3e1a1.jpg" alt="魔女の战斗补给2">
                    </div>
                    <div class="product-name">魔女の战斗补给2</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org3" data-name="魔女の战斗补给2" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a00d90ae.jpg" alt="【长安】kit">
                    </div>
                    <div class="product-name">【长安】kit</div>
                    <div class="product-price">¥0.10</div>
                    <button class="add-to-cart" data-id="org4" data-name="【长安】kit" data-price="0.1">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a03accd1.jpg" alt="NAU组织物资盒v3">
                    </div>
                    <div class="product-name">NAU组织物资盒v3</div>
                    <div class="product-price">¥0.10</div>
                    <button class="add-to-cart" data-id="org5" data-name="NAU组织物资盒v3" data-price="0.1">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a07a2003.jpg" alt="TMR PVP KIT">
                    </div>
                    <div class="product-name">TMR PVP KIT</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org6" data-name="TMR PVP KIT" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a07ce52c.jpg" alt="TGM萌新帮助kit">
                    </div>
                    <div class="product-name">TGM萌新帮助kit</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org7" data-name="TGM萌新帮助kit" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58d0cda2db.jpg" alt="hyppvpkit">
                    </div>
                    <div class="product-name">hyppvpkit</div>
                    <div class="product-price">¥0.10</div>
                    <button class="add-to-cart" data-id="org8" data-name="hyppvpkit" data-price="0.1">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58d6f5fbf7.jpg" alt="SH | 装备kit">
                    </div>
                    <div class="product-name">SH | 装备kit</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="org9" data-name="SH | 装备kit" data-price="0.2">加入购物车</button>
                </div>
            </div>
        </section>
        
        <section id="misc-kits" class="category">
            <h2 class="category-title">杂项kit</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c5877b42e71.jpg" alt="魔女の驴刷kit">
                    </div>
                    <div class="product-name">魔女の驴刷kit</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc1" data-name="魔女の驴刷kit" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c5877b44d13.jpg" alt="魔女の红石">
                    </div>
                    <div class="product-name">魔女の红石</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc2" data-name="魔女の红石" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589c74f45d.jpg" alt="我也是养鸡大户">
                    </div>
                    <div class="product-name">我也是养鸡大户</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc3" data-name="我也是养鸡大户" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589c739dbf.jpg" alt="魔女的模板图鉴">
                    </div>
                    <div class="product-name">魔女的模板图鉴</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc4" data-name="魔女的模板图鉴" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a02b92d0.jpg" alt="魔女的异次元口袋">
                    </div>
                    <div class="product-name">魔女的异次元口袋</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc5" data-name="魔女的异次元口袋" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a035a92e.jpg" alt="鲜花kit~W2_灵鱼">
                    </div>
                    <div class="product-name">鲜花kit~W2_灵鱼</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc6" data-name="鲜花kit~W2_灵鱼" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a071c9d3.jpg" alt="狂乱的鸡尾酒">
                    </div>
                    <div class="product-name">狂乱的鸡尾酒</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc7" data-name="狂乱的鸡尾酒" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58d0cc6156.jpg" alt="杂物盒kit~W2_灵鱼">
                    </div>
                    <div class="product-name">杂物盒kit~W2_灵鱼</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="misc8" data-name="杂物盒kit~W2_灵鱼" data-price="0.2">加入购物车</button>
                </div>
            </div>
        </section>
        
        <section id="banner-kits" class="category">
            <h2 class="category-title">旗帜类kit</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c589c73777f.jpg" alt="ElytraSky(TC) Banners Kit">
                    </div>
                    <div class="product-name">ElytraSky(TC) Banners Kit</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="banner1" data-name="ElytraSky(TC) Banners Kit" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58d0ce4573.jpg" alt="云梦泽公会（旗帜kit）">
                    </div>
                    <div class="product-name">云梦泽公会（旗帜kit）</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="banner2" data-name="云梦泽公会（旗帜kit）" data-price="0.2">加入购物车</button>
                </div>
            </div>
        </section>
        
        <section id="forbidden-kits" class="category">
            <h2 class="category-title">违禁品kit</h2>
            <div class="products">
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a08275d3.jpg" alt="32k床">
                    </div>
                    <div class="product-name">32k床</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="forbidden1" data-name="32k床" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a04a1337.jpg" alt="32k钻石剑">
                    </div>
                    <div class="product-name">32k钻石剑</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="forbidden2" data-name="32k钻石剑" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58d0ff30ab.jpg" alt="有手臂的盔甲架">
                    </div>
                    <div class="product-name">有手臂的盔甲架</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="forbidden3" data-name="有手臂的盔甲架" data-price="0.2">加入购物车</button>
                </div>
                <div class="product">
                    <div class="product-image-container">
                        <img class="product-image" src="https://youke1.picui.cn/s1/2025/09/13/68c58a033539d.jpg" alt="op药水">
                    </div>
                    <div class="product-name">op药水</div>
                    <div class="product-price">¥0.20</div>
                    <button class="add-to-cart" data-id="forbidden4" data-name="op药水" data-price="0.2">加入购物车</button>
                </div>
            </div>
        </section>
    </div>

    <div class="cart-container" id="cart-container">
        <div class="cart-header" id="cart-toggle">
            <div class="cart-title">购物车 <span id="cart-count">0</span></div>
            <div class="cart-toggle">▼</div>
        </div>
        <div class="cart-content" id="cart-content">
            <div id="cart-items">
                <!-- 购物车商品将在这里显示 -->
            </div>
            <div class="cart-total">
                总计: ¥<span id="total-price">0.00</span>
            </div>
            <div class="username-input">
                <label for="username">游戏ID:</label>
                <input type="text" id="username" placeholder="请输入您的游戏ID">
            </div>
            <div class="cart-actions">
                <button class="generate-code" id="generate-code">生成订单代码</button>
                <button class="clear-cart" id="clear-cart">清空购物车</button>
            </div>
            <div class="code-output" id="code-output"></div>
        </div>
    </div>

    <script>
        let cart = [];
        let totalPrice = 0;
        const toast = document.getElementById('toast');
        
        // 显示提示信息
        function showToast(message, duration = 2000) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }
        
        // 创建跳跃的+1动画
        function createPlusOneAnimation(button) {
            const plusOne = document.createElement('div');
            plusOne.className = 'plus-one';
            plusOne.textContent = '+1';
            
            const productCard = button.closest('.product');
            productCard.appendChild(plusOne);
            
            // 动画结束后移除元素
            setTimeout(() => {
                plusOne.remove();
            }, 1000);
        }
        
        // 初始化购物车
        function initCart() {
            updateCart();
            
            // 购物车展开/折叠
            document.getElementById('cart-toggle').addEventListener('click', () => {
                document.getElementById('cart-container').classList.toggle('expanded');
            });
            
            // 生成订单代码
            document.getElementById('generate-code').addEventListener('click', generateOrderCode);
            
            // 清空购物车
            document.getElementById('clear-cart').addEventListener('click', clearCart);
        }
        
        // 添加商品到购物车
        function addToCart(id, name, price, button) {
            // 添加点击效果
            button.classList.add('clicked');
            setTimeout(() => {
                button.classList.remove('clicked');
            }, 1000);
            
            // 创建跳跃的+1动画
            createPlusOneAnimation(button);
            
            // 检查是否已经在购物车中
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, name, price: parseFloat(price), quantity: 1 });
            }
            
            totalPrice += parseFloat(price);
            updateCart();
            showToast(`已添加 ${name} 到购物车`);
        }
        
        // 更新购物车显示
        function updateCart() {
            const cartItemsElement = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');
            const cartCountElement = document.getElementById('cart-count');
            
            cartItemsElement.innerHTML = '';
            
            if (cart.length === 0) {
                cartItemsElement.innerHTML = '<p style="text-align:center;padding:20px 0;">购物车是空的</p>';
                document.getElementById('code-output').style.display = 'none';
            } else {
                cart.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'cart-item';
                    itemElement.innerHTML = `
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">¥${item.price.toFixed(2)} × ${item.quantity} = ¥${(item.price * item.quantity).toFixed(2)}</div>
                            <div class="cart-item-quantity">
                                <button class="quantity-btn minus" data-index="${index}">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn plus" data-index="${index}">+</button>
                            </div>
                        </div>
                        <button class="remove-btn" data-index="${index}">移除</button>
                    `;
                    cartItemsElement.appendChild(itemElement);
                });
                
                // 为数量按钮添加事件
                document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const index = e.target.getAttribute('data-index');
                        updateQuantity(index, -1);
                    });
                });
                
                document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const index = e.target.getAttribute('data-index');
                        updateQuantity(index, 1);
                    });
                });
                
                // 为移除按钮添加事件
                document.querySelectorAll('.remove-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const index = e.target.getAttribute('data-index');
                        removeItem(index);
                    });
                });
            }
            
            totalPriceElement.textContent = totalPrice.toFixed(2);
            cartCountElement.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        }
        
        // 更新商品数量
        function updateQuantity(index, change) {
            const item = cart[index];
            if (item.quantity + change < 1) return;
            
            item.quantity += change;
            totalPrice += item.price * change;
            updateCart();
        }
        
        // 移除商品
        function removeItem(index) {
            const item = cart[index];
            totalPrice -= item.price * item.quantity;
            cart.splice(index, 1);
            updateCart();
            showToast(`已移除 ${item.name}`);
        }
        
        // 清空购物车
        function clearCart() {
            if (cart.length === 0) return;
            
            if (confirm('确定要清空购物车吗？')) {
                cart = [];
                totalPrice = 0;
                updateCart();
                showToast('购物车已清空');
            }
        }
        
        // 生成订单代码
        function generateOrderCode() {
            if (cart.length === 0) {
                showToast('购物车是空的！');
                return;
            }
            
            const username = document.getElementById('username').value.trim();
            if (!username) {
                showToast('请输入您的游戏ID！');
                return;
            }
            
            // 创建订单对象
            const order = {
                date: new Date().toISOString(),
                username: username,
                items: cart,
                total: totalPrice
            };
            
            // 转换为Base64编码字符串
            const orderString = JSON.stringify(order);
            const orderCode = btoa(encodeURIComponent(orderString));
            
            // 显示代码
            const codeOutput = document.getElementById('code-output');
            codeOutput.textContent = orderCode;
            codeOutput.style.display = 'block';
            
            // 自动复制到剪贴板
            navigator.clipboard.writeText(orderCode)
                .then(() => {
                    showToast('订单代码已生成并复制到剪贴板！');
                })
                .catch(err => {
                    console.error('复制失败:', err);
                    showToast('订单代码已生成，请手动复制！');
                });
        }
        
        // 初始化事件监听
        document.addEventListener('DOMContentLoaded', () => {
            initCart();
            
            // 为所有加入购物车按钮添加事件
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = button.getAttribute('data-id');
                    const name = button.getAttribute('data-name');
                    const price = button.getAttribute('data-price');
                    addToCart(id, name, price, button);
                });
            });
        });
    </script>
</body>
</html>